# Docs for the Azure Web Apps Deploy action: https://github.com/Azure/webapps-deploy
# More GitHub Actions for Azure: https://github.com/Azure/actions

name: Build and deploy container app to Azure Web App - track-rejoice

on:
  push:
    branches:
      - main
  workflow_dispatch:

jobs:
     build-and-push:
       runs-on: ubuntu-latest
       steps:
       - name: Checkout
         uses: actions/checkout@v2

       - name: Log in to Azure
         uses: azure/login@v1
         with:
           creds: ${{ secrets.AZURE_CREDENTIALS }}

       - name: Build and push Docker image
         run: |
           docker build -t trackrejoiceregistry.azurecr.io/my-image:latest .
           docker push trackrejoiceregistry.azurecr.io/my-image:latest
